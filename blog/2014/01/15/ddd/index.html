
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>rubyコーディング規約 - kaku's Blog</title>
	<meta name="author" content="kaku">

	
	<meta name="description" content="はじめに本文書は、Rubyによりコーディングを行う際の規約について述べる。 実際のプロジェクトに適用する際には、このコーディング規約をカスタ マイズして用いることを推奨する。
ソースコードの整形インデントプログラムを読みやすくするため、インデントを適宜行う。インデント 幅は2とする。また、 &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="kaku's Blog" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">kaku's Blog</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:kaku87.github.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/ghjcumt2008" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/ghjcumt2008@gmail.com" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:kaku87.github.com">
	</form>
</nav>

</header>
	
		
<div id="banner" class="inner">
	<div class="container">
		<ul class="feed"></ul>
	</div>
	<small><a href="http://twitter.com/ghjcumt2008">ghjcumt2008</a> @ <a href="http://twitter.com">Twitter</a></small>
	<div class="loading">Loading...</div>
</div>
<script src="/javascripts/twitter.js"></script>
<script type="text/javascript">
	(function($){
		$('#banner').getTwitterFeed('ghjcumt2008', 4, false);
	})(jQuery);
</script>

	
	<div id="content" class="inner"><article class="post">
	<h2 class="title">Rubyコーディング規約</h2>
	<div class="entry-content"><p>はじめに本文書は、Rubyによりコーディングを行う際の規約について述べる。 実際のプロジェクトに適用する際には、このコーディング規約をカスタ マイズして用いることを推奨する。
ソースコードの整形インデントプログラムを読みやすくするため、インデントを適宜行う。インデント 幅は2とする。また、インデントにはスペースのみを使用し、タブは使用 しない。(環境によりタブ幅が異なるため。)
if x > 0
  if y > 0</p>

<pre><code>puts "x &gt; 0 &amp;&amp; y &gt; 0"
</code></pre>

<p>  end
end</p>

<p>一行の桁数一行の桁数は最大80桁までとする。
空行複数のクラスの区切には空行を挿入する。
class Foo
  &#8230;
end</p>

<p>class Bar
  &#8230;
end</p>

<p>誤った例:
class Foo
  &#8230;
end
class Bar
  &#8230;
end</p>

<p>また、クラス内の各構成要素の区切にも空行を挿入する。 ただし、最初の構成要素の前や、最後の構成要素の後には空行は挿入し ない。
class Foo
  attr :bar</p>

<p>  def baz</p>

<pre><code>...
</code></pre>

<p>  end</p>

<p>  def quux</p>

<pre><code>..
</code></pre>

<p>  end
end</p>

<p>誤った例:
class Foo</p>

<p>  attr :bar</p>

<p>  def baz</p>

<pre><code>...
</code></pre>

<p>  end</p>

<p>  def quux</p>

<pre><code>...
</code></pre>

<p>  end</p>

<p>end</p>

<p>コメントメソッド定義の中にはコメントは記述しない。(コメントが必要だと思わ れるようなコードにはリファクタリングを行う。)
ただし、クラス・モジュールやパブリックなメソッドには仕様をRDocス タイルで記述する。</p>

<h1>コンマ区切の文字列+str+を分割し、結果を配列にして返す。</h1>

<p>def split_csv(str)
  return str.split(/,/)
end</p>

<p>構文に関する規約クラスの構成要素クラスの構成要素は以下の順序で記述する。</p>

<pre><code>1. モジュールのインクルード
2. 定数の定義
3. クラス変数・クラスのインスタンス変数の定義
4. パブリックなクラスメソッドの定義
5. アクセサの定義
6. initializeの定義
7. パブリックなインスタンスメソッドの定義
8. プロテクティッドなクラスメソッドの定義
9. プロテクティッドなアクセサの定義
10. プロテクティッドなインスタンスメソッドの定義
11. プライベートなクラスメソッドの定義
12. プライベートなアクセサの定義
13. プライベートなインスタンスメソッドの定義
14. ネストしたクラスの定義
</code></pre>

<p>アクセサの定義アクセサの定義には、attr_accessor・attr_reader・ attr_writerを使用する。(attrは使用しない。)
メソッドの定義メソッド定義の仮引数リストには括弧を付ける。 ただし、引数がない場合は、括弧を省略する。
def foo(x, y)
  &#8230;
end</p>

<p>def foo
  &#8230;
end</p>

<p>誤った例:
def foo x, y
  &#8230;
end</p>

<p>def foo()
  &#8230;
end</p>

<p>クラスメソッドの定義クラスメソッドの定義にはselfを使用する。
class Foo
  def self.foo</p>

<pre><code>...
</code></pre>

<p>  end
end</p>

<p>誤った例:
class Foo
  def Foo.foo</p>

<pre><code>...
</code></pre>

<p>  end
end</p>

<p>メソッド呼び出しメソッド呼び出しの引数リストには括弧を付ける。ただし、引数がない 場合は、括弧を省略する。また、printやputsやpの 場合は、引数の括弧を省略してもよい。
foo(1, &#8220;abc&#8221;)
obj.foo(1, &#8220;abc&#8221;)
bar
print &#8220;x = &#8220;, x, &#8220;\n&#8221;</p>

<p>誤った例:
foo 1, &#8220;abc&#8221;
obj.foo 1, &#8220;abc&#8221;
bar()</p>

<p>ブロックブロックは基本的にdo &#8230; endを使用する。
foo(x, y) do
  &#8230;
end</p>

<p>x = bar(y, z) do
  &#8230;
end</p>

<p>誤った例:
foo(x, y) {
  &#8230;
}</p>

<p>x = bar(y, z) {
  &#8230;
}</p>

<p>ただし、メソッドチェインを行う場合は{ &#8230; }を使用する。
s = ary.collect { |i| i.to_s }.join(&#8220;,&#8221;)</p>

<p>誤った例:
s = ary.collect do |i| i.to_s end.join(&#8220;,&#8221;)</p>

<p>return メソッドの値を返す場合は、必ずreturnを使用する。 また、returnの括弧は省略する。
def add(x, y)
  return x + y
end</p>

<p>誤った例:
def add(x, y)
  x + y
end</p>

<p>def add(x, y)
  return(x + y)
end</p>

<p>yield yieldの呼び出し方法はメソッド呼び出しに準ずる。
条件分岐if式のthenは省略する。また、if !xのような場合は、 unless xに置き換える。ただし、unlessの場合、 elseは使用しない。また、条件が十分に簡単で、一行で書ける場 合は、if/while修飾子を使用してもよい。
if x > 0
  puts &#8220;x > 0&#8221;
else
  puts &#8220;x &lt;= 0&#8221;
end</p>

<p>unless x
  puts &#8220;x is false&#8221;
end</p>

<p>puts &#8220;x is true&#8221; if x</p>

<p>誤った例:
if x > 0 then
  puts &#8220;x > 0&#8221;
end</p>

<p>unless x
  puts &#8220;x is false&#8221;
else
  puts &#8220;x is true&#8221;
end</p>

<p>puts &#8220;foo &amp;&amp; bar &amp;&amp; baz &amp;&amp; quux&#8221; if foo &amp;&amp;
  bar &amp;&amp; baz &amp;&amp; quux</p>

<p>caseを使用できる場合は、caseを使用する。 また、thenは省略する。
case x
when 1
  &#8230;
when 2
  &#8230;
end</p>

<p>誤った例:
if x == 1
  &#8230;
elsif x == 2
  &#8230;
end</p>

<p>case x
when 1 then
  &#8230;
when 2 then
  &#8230;
end</p>

<p>条件分岐の式の値は使用しない。
if x > 0
  msg = &#8220;x > 0&#8221;
else
  msg = &#8220;x &lt;= 0&#8221;
end</p>

<p>誤った例:
msg = if x > 0</p>

<pre><code>    "x &gt; 0"
  else
    "x &lt;= 0"
  end
</code></pre>

<p>繰り返しwhileのdoは省略する。また、while !xのような場合は、 until xに置き換える。
while cond
  &#8230;
end</p>

<p>until cond
  &#8230;
end</p>

<p>誤った例:
while cond do
  &#8230;
end</p>

<p>また、無限ループにはloopを使用する。
loop do
  &#8230;
end</p>

<p>誤った例:
while true
  &#8230;
end</p>

<p>論理演算子論理演算には!や&amp;&amp;や||を使用する。 (not/and/orは使用しない。)
三項演算子明らかに可読性に問題がない場合を除いて、三項演算子はなるべく使用しない。 とくに、括弧が必要なほど条件が複雑な場合や、複数行になってしまう 場合は、三項演算子は使用しない。
文字列リテラル文字列リテラルには基本的に&#8221;&#8230;&#8221;を使用する。ただし、特殊文字 を解釈させたくない場合のみ、&#8217;&#8230;&#8217;を使用する。 また、原則的にヒアドキュメントは使用しない。
命名規約全般</p>

<pre><code>1. 原則として、単語の省略は行わない。
2. スコープが狭いループ変数には、i, j, kという名前をこの順序で使 用する。
3. スコープが狭い変数名には、クラス名を省略したものを使用してよい。 (例: eo = ExampleObject.new)
</code></pre>

<p>クラス・モジュール名クラス・モジュール名は、各単語の一文字目を大文字にし、`_&#8217;などの区切 文字は使用しない。 ただし、HTTPなどの略語の場合はすべて大文字のままとする。
ExampleClass<br/>
HTTPClient</p>

<p>誤った例:
Example_Class
EXAMPLE_CLASS
HttpClient
HTTPclient
HTTP_Client</p>

<p>メソッド名メソッド名は、すべて小文字とし、単語の区切りに`_&#8217;を用いる。メソッ ド名には動詞の原形を使用する。
add_something</p>

<p>誤った例:
addsSomething
Add_Something</p>

<p>真偽値を返すメソッド名は、動詞または形容詞に<code>?'を付け、形容詞に</code>is_&#8217;は付けない。
visible?
誤った例:
is_visible
is_visible?
また、破壊的なメソッドと非破壊的なメソッドの両方を提供する場合、破 壊的なメソッドには`!&#8217;を付ける。
split
split! # splitの破壊的バージョン</p>

<p>定数名クラス・モジュール名以外の定数名は、すべて大文字とし、単語の区切 りに`_&#8217;を用いる。
EXAMPLE_CONSTANT</p>

<p>変数名変数名は、すべて小文字とし、単語の区切りに`_&#8217;を用いる。
tmp
local_variable
@instance_variable
$global_variable</p>

<p>ファイル名ファイル名は、すべて小文字とし、単語の区切りに`-&#8216;を用いる。 また、ファイル中の主な定義クラスの名前を変換したものをファイル名 に使用する。(モジュールを名前空間として使用する場合は、ディレクト リを使用して階層構造を表現する。)
foo.rb # クラスFooを定義
foo-bar.rb # クラスFooBarを定義
foo/bar-baz.rb # クラスFoo::BarBazを定義</p>
</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-01-15T05:18:00+00:00" pubdate data-updated="true">Jan 15<span>th</span>, 2014</time></div>
	<div class="tags">

</div>
	
	<div class="comments"><a href="#disqus_thread">Comments</a></div>
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
		
		<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
		
		
		<a class="addthis_button_tweet"></a>
		
		
		
	</div>
	
</div>



<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2014

    kaku

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'kaku87blog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://kaku87.github.com/blog/2014/01/15/ddd/';
        var disqus_url = 'http://kaku87.github.com/blog/2014/01/15/ddd/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//go.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-39101353-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>